var MainTable={init:function(){this.responsiveTable(),this.tooltip(),this.print()},responsiveTable:function(){$(".table-responsive").responsiveTable({})},tooltip:function(){$(window).width()>=1200&&$(".tooltip-parent").tooltip({placement:"bottom"}),$(".tooltip-parent").click(function(){$(this).toggleClass("opened").next(".collapse").slideToggle(300)})},print:function(){$(".print-btn").on("click",function(){window.print()})}};$(document).ready(function(){MainTable.init()}),function(t){"use strict";function i(){return void 0!==window.matchMedia||void 0!==window.msMatchMedia||void 0!==window.styleMedia}function e(){return"ontouchstart"in window}function o(){return!!(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i))}function a(){return o()?parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_","")):0}var n=function(i,e){var o=this;if(this.options=e,this.$tableWrapper=null,this.$tableScrollWrapper=t(i),this.$table=t(i).find("table"),1!==this.$table.length)throw new Error("Exactly one table is expected in a .table-responsive div.");this.$tableScrollWrapper.attr("data-pattern",this.options.pattern),this.id=this.$table.prop("id")||this.$tableScrollWrapper.prop("id")||"id"+Math.random().toString(16).slice(2),this.$tableClone=null,this.$stickyTableHeader=null,this.$thead=this.$table.find("thead"),this.$hdrCells=this.$thead.find("tr").first().find("th"),this.$bodyRows=this.$table.find("tbody, tfoot").find("tr"),this.$btnToolbar=null,this.$dropdownGroup=null,this.$dropdownBtn=null,this.$dropdownContainer=null,this.$displayAllBtn=null,this.$focusGroup=null,this.$focusBtn=null,this.displayAllTrigger="display-all-"+this.id+".responsive-table",this.idPrefix=this.id+"-col-",this.headerColIndices={},this.headerRowIndices={},this.wrapTable(),this.createButtonToolbar(),this.buildHeaderCellIndices(),this.setupTableHeader(),this.setupBodyRows(),this.options.stickyTableHeader&&this.createStickyTableHeader(),this.$dropdownContainer.is(":empty")&&this.$dropdownGroup.hide(),t(window).bind("orientationchange resize "+this.displayAllTrigger,function(){o.$dropdownContainer.find("input").trigger("updateCheck"),t.proxy(o.updateSpanningCells(),o)}).trigger("resize")};n.DEFAULTS={pattern:"priority-columns",stickyTableHeader:!0,fixedNavbar:".navbar-fixed-top",addDisplayAllBtn:!0,addFocusBtn:!0,focusBtnIcon:"glyphicon glyphicon-screenshot",mainContainer:window,i18n:{focus:"Focus",display:"Display",displayAll:"Display all"}},n.prototype.wrapTable=function(){this.$tableScrollWrapper.wrap('<div class="table-wrapper"/>'),this.$tableWrapper=this.$tableScrollWrapper.parent()},n.prototype.createButtonToolbar=function(){var i=this;this.$btnToolbar=t('[data-responsive-table-toolbar="'+this.id+'"]').addClass("btn-toolbar"),0===this.$btnToolbar.length&&(this.$btnToolbar=t('<div class="btn-toolbar" />')),this.$dropdownGroup=t('<div class="btn-group dropdown-btn-group pull-right" />'),this.$dropdownBtn=t('<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">'+this.options.i18n.display+' <span class="caret"></span></button>'),this.$dropdownContainer=t('<ul class="dropdown-menu"/>'),this.options.addFocusBtn&&(this.$focusGroup=t('<div class="btn-group focus-btn-group" />'),this.$focusBtn=t('<button type="button" class="btn btn-default">'+this.options.i18n.focus+"</button>"),this.options.focusBtnIcon&&this.$focusBtn.prepend('<span class="'+this.options.focusBtnIcon+'"></span> '),this.$focusGroup.append(this.$focusBtn),this.$btnToolbar.append(this.$focusGroup),this.$focusBtn.click(function(){t.proxy(i.activateFocus(),i)}),this.$bodyRows.click(function(){t.proxy(i.focusOnRow(t(this)),i)})),this.options.addDisplayAllBtn&&(this.$displayAllBtn=t('<button type="button" class="btn btn-default">'+this.options.i18n.displayAll+"</button>"),this.$dropdownGroup.append(this.$displayAllBtn),this.$table.hasClass("display-all")&&this.$displayAllBtn.addClass("btn-primary"),this.$displayAllBtn.click(function(){t.proxy(i.displayAll(null,!0),i)})),this.$dropdownGroup.append(this.$dropdownBtn).append(this.$dropdownContainer),this.$btnToolbar.append(this.$dropdownGroup),this.$tableScrollWrapper.before(this.$btnToolbar)},n.prototype.clearAllFocus=function(){this.$bodyRows.removeClass("unfocused"),this.$bodyRows.removeClass("focused")},n.prototype.activateFocus=function(){this.clearAllFocus(),this.$focusBtn&&this.$focusBtn.toggleClass("btn-primary"),this.$table.toggleClass("focus-on")},n.prototype.focusOnRow=function(i){if(this.$table.hasClass("focus-on")){var e=t(i).hasClass("focused");this.clearAllFocus(),e||(this.$bodyRows.addClass("unfocused"),t(i).addClass("focused"))}},n.prototype.displayAll=function(i,e){this.$displayAllBtn&&this.$displayAllBtn.toggleClass("btn-primary",i),this.$table.toggleClass("display-all",i),this.$tableClone&&this.$tableClone.toggleClass("display-all",i),e&&t(window).trigger(this.displayAllTrigger)},n.prototype.preserveDisplayAll=function(){var i="table-cell";t("html").hasClass("lt-ie9")&&(i="inline"),t(this.$table).find("th, td").css("display",i),this.$tableClone&&t(this.$tableClone).find("th, td").css("display",i)},n.prototype.createStickyTableHeader=function(){var i=this;i.$tableClone=i.$table.clone(),i.$tableClone.prop("id",this.id+"-clone"),i.$tableClone.find("[id]").each(function(){t(this).prop("id",t(this).prop("id")+"-clone")}),i.$tableClone.wrap('<div class="sticky-table-header"/>'),i.$stickyTableHeader=i.$tableClone.parent(),i.$stickyTableHeader.css("height",i.$thead.height()+2),i.$table.before(i.$stickyTableHeader),t(this.options.mainContainer).bind("scroll",function(){t.proxy(i.updateStickyTableHeader(),i)}),t(window).bind("resize",function(e){t.proxy(i.updateStickyTableHeader(),i)}),t(i.$tableScrollWrapper).bind("scroll",function(){t.proxy(i.updateStickyTableHeader(),i)}),i.useFixedSolution=!o()||a()>=8,i.useFixedSolution?i.$tableScrollWrapper.addClass("fixed-solution"):i.$tableScrollWrapper.addClass("absolute-solution")},n.prototype.updateStickyTableHeader=function(){var i=this,e=0,o=i.$table.offset().top,a=t(this.options.mainContainer).scrollTop()-1,n=i.$table.height()-i.$stickyTableHeader.height(),s=a+t(this.options.mainContainer).height()-t(document).height(),l=0;t(i.options.fixedNavbar).length&&(a+=l=t(i.options.fixedNavbar).first().height());var r;if(r=this.options.mainContainer===window?a>o&&a<o+i.$table.height():o<=0&&-o<i.$table.height(),i.useFixedSolution){if(i.$stickyTableHeader.scrollLeft(i.$tableScrollWrapper.scrollLeft()),e=l-1,this.options.mainContainer===window&&a-o>n?(e-=a-o-n,i.$stickyTableHeader.addClass("border-radius-fix")):this.options.mainContainer!==window&&-o>n?(e-=-o-n,i.$stickyTableHeader.addClass("border-radius-fix")):i.$stickyTableHeader.removeClass("border-radius-fix"),r)return void i.$stickyTableHeader.css({visibility:"visible",top:e+"px",width:i.$tableScrollWrapper.innerWidth()+"px"});i.$stickyTableHeader.css({visibility:"hidden",width:"auto"})}else{(e=this.options.mainContainer===window?a-o-1:-o-1)<0?e=0:e>n&&(e=n),this.options.mainContainer===window&&s>0&&(e-=s),r?(i.$stickyTableHeader.css({visibility:"visible"}),i.$stickyTableHeader.animate({top:e+"px"},400),i.$thead.css({visibility:"hidden"})):i.$stickyTableHeader.animate({top:"0"},400,function(){i.$thead.css({visibility:"visible"}),i.$stickyTableHeader.css({visibility:"hidden"})})}},n.prototype.setupTableHeader=function(){var i=this;i.$hdrCells.each(function(e){var o=t(this),a=o.prop("id"),n=o.text();if(a||(a=i.idPrefix+e,o.prop("id",a)),""===n&&(n=o.attr("data-col-name")),o.is("[data-priority]")&&-1!==o.data("priority")){var s=t('<li class="checkbox-row"><input type="checkbox" name="toggle-'+a+'" id="toggle-'+a+'" value="'+a+'" /> <label for="toggle-'+a+'">'+n+"</label></li>"),l=s.find("input");i.$dropdownContainer.append(s),s.click(function(){l.prop("checked",!l.prop("checked")),l.trigger("change")}),t("html").hasClass("lt-ie9")&&l.click(function(){t(this).trigger("change")}),s.find("label").click(function(t){t.stopPropagation()}),s.find("input").click(function(t){t.stopPropagation()}).change(function(){var e=t(this),o=e.val(),a=i.$tableWrapper.find("#"+o+", #"+o+"-clone, [data-columns~="+o+"]");i.$table.hasClass("display-all")&&(t.proxy(i.preserveDisplayAll(),i),i.$table.removeClass("display-all"),i.$tableClone&&i.$tableClone.removeClass("display-all"),i.$displayAllBtn.removeClass("btn-primary")),a.each(function(){var i=t(this);if(e.is(":checked")){if(!i.closest("thead").length&&"none"!==i.css("display")){var o=Math.min(parseInt(i.prop("colSpan"))+1,i.attr("data-org-colspan"));i.prop("colSpan",o)}i.show()}else!i.closest("thead").length&&parseInt(i.prop("colSpan"))>1?i.prop("colSpan",parseInt(i.prop("colSpan"))-1):i.hide()})}).bind("updateCheck",function(){"none"!==o.css("display")?t(this).prop("checked",!0):t(this).prop("checked",!1)})}}),t.isEmptyObject(this.headerRowIndices)||i.setupRow(this.$thead.find("tr:eq(1)"),this.headerRowIndices)},n.prototype.setupBodyRows=function(){var i=this;i.$bodyRows.each(function(){i.setupRow(t(this),i.headerColIndices)})},n.prototype.setupRow=function(i,e){var o=this;if(!i.data("setup")){i.data("setup",!0);var a=0;i.find("th, td").each(function(){var i=t(this),n="",s=i.prop("colSpan");i.attr("data-org-colspan",s),s>1&&i.addClass("spn-cell");for(var l=a;l<a+s;l++){n=n+" "+o.idPrefix+e[l];var r=o.$table.find("#"+o.idPrefix+e[l]).attr("data-priority");r&&i.attr("data-priority",r)}n=n.substring(1),i.attr("data-columns",n),a+=s})}},n.prototype.buildHeaderCellIndices=function(){var i=this,e={};this.headerColIndices={},this.headerRowIndices={};var o=0,a=0;if(this.$thead.find("tr").first().find("th").each(function(n){for(var s=t(this),l=s.prop("colSpan"),r=s.prop("rowSpan"),d=0;d<l;d++)i.headerColIndices[o+n+d]=n,o+n+d>=0&&(e[o+n+d-a]=a);r>1&&a++,o+=l-1}),this.$thead.find("tr").length>2)throw new Error("This plugin doesnt support more than two rows in thead.");2===this.$thead.find("tr").length&&t(this.$thead.find("tr")[1]).find("th").each(function(t){i.headerRowIndices[t]=i.headerColIndices[e[t]+t]})},n.prototype.update=function(){this.$bodyRows=this.$table.find("tbody, tfoot").find("tr"),this.setupBodyRows(),this.$tableClone.find("tbody, tfoot").remove();var i=this.$table.find("tbody, tfoot").clone();i.find("[id]").each(function(){t(this).prop("id",t(this).prop("id")+"-clone")}),i.appendTo(this.$tableClone),this.$dropdownContainer.find("input").trigger("change")},n.prototype.updateSpanningCells=function(){this.$table.find(".spn-cell").each(function(){for(var i=t(this),e=i.attr("data-columns").split(" "),o=e.length,a=0,n=0;n<o;n++)"none"===t("#"+e[n]).css("display")&&a++;a!==o?i.show():i.hide(),i.prop("colSpan",Math.max(o-a,1))})};var s=t.fn.responsiveTable;t.fn.responsiveTable=function(i){return this.each(function(){var e=t(this),o=e.data("responsiveTable"),a=t.extend({},n.DEFAULTS,e.data(),"object"==typeof i&&i);""!==a.pattern&&(o||e.data("responsiveTable",o=new n(this,a)),"string"==typeof i&&o[i]())})},t.fn.responsiveTable.Constructor=n,t.fn.responsiveTable.noConflict=function(){return t.fn.responsiveTable=s,this},t(document).on("ready.responsive-table.data-api",function(){t("[data-pattern]").each(function(){var i=t(this);i.responsiveTable(i.data())})}),t(document).on("click.dropdown.data-api",".dropdown-menu .checkbox-row",function(t){t.stopPropagation()}),t(document).ready(function(){t("html").removeClass("no-js").addClass("js"),i()?t("html").addClass("mq"):t("html").addClass("no-mq"),e()?t("html").addClass("touch"):t("html").addClass("no-touch")})}(jQuery);